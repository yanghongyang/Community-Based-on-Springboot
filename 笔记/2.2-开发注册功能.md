#### 开发注册功能

- 访问注册页面
  - 点击顶部区域内的链接，打开注册页面
- 提交注册数据——使用 `Apache Commons Lang`
  - 通过表单提交数据
  - 服务端验证账号是否已经存在、邮箱是否已经注册
  - 服务端发送激活邮件
- 激活注册账号
  - 点击邮件中的链接，访问服务端的激活服务

#### 开发细节

##### Thymeleaf 的 html文件设置

- 想要复用某段 `html` 代码，可以使用 `th:fragment` 标签

  如果想把 `index.html` 文件中的 `<header>` 标签中的内容进行复用，可以先在 `index.html` 的 `<header>` 标签中加入 `th:fragment` 属性 

  ```html
  <header class="bg-dark sticky-top" th:fragment="header">
      ......
  </header>
  ```

   如果想在 `register.html` 文件中复用 `index.html` 中的 `<header>` 标签，可以在 `register.html` 的 `<header>` 标签中加入 `th:replace` 属性

  ```html
  <header class="bg-dark sticky-top" th:replace="index::header">
      ......
  </header>
  ```

##### 后台实现注册功能

- 要想实现注册功能，首先得实现两个工具类（在 `util` 文件夹下创建）。一个是生成随机字符串，另一个是对密码进行加密。

  ```java
  //生成随机字符串，并把所有的'-'替换成空字符
  public static String generateUUID(){
      return UUID.randomUUID().toString().replaceAll("-", "");
  }
  ```

```java
//MD5加密（只能加密而不能解密）
//安全性起见，会在原密码后加salt，然后再加密（因为salt是随机值）
public static String md5(String key)
{
    //如果参数为空
    if(StringUtils.isEmptyOrWhitespaceOnly(key))
    {
        return null;
    }
    return DigestUtils.md5DigestAsHex(key.getBytes());
}
```

- 由于注册功能和用户相关，因此业务组件写在 `Service->UserService.java` 下。除此之外，由于注册的时候需要用邮件发验证码，因此需要使用自动注入功能把邮件相关信息注入。