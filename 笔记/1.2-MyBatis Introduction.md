使用Mysql导入的时候，需要用"/“而不是"\ "，不然会报错。

#### MyBatis 入门

- 核心组件

  - SqlSessionFactory : 用于构建SqlSession的工厂类
  - SqlSession : MyBatis的核心组件，用于向数据库执行SQL
  - 主配置文件：XML配置文件，可以对MyBatis的底层行为做出详细的配置
  - Mapper接口：就是DAO接口，在MyBatis中习惯性地称之为Mapper
  - Mapper映射器：用于编写SQL，并将SQL和实体类映射的组件，采用XML和注解都可以实现。

  前三个组件尽管非常重要，但是spring项目已经进行了整合，因此在开发时不用管。

  开发时主要对Mapper接口和Mapper映射器进行开发。




Mysql表的设计小技巧

1. 用户user表的密码后加随机串(salt表项)，可以提高密码安全性。

连接池：也叫做数据源，是统一管理连接的工厂。

MyBatis的DAO层，所用的接口的注解为@Mapper。

在Mapper.xml中要写各种各样的标签，首先要修改mapper namespace中的mapper的路径（为自己写的mapper所在的路径（也就是dao文件下的mapper文件）），接着要写一系列的标签，这些标签需要与自己写的mapper中的方法相对应。

如果mapper中是select方法，就在.xml中加select标签。如果是insert方法，就在.xml中加insert标签。

select标签的id属性要写mapper文件中对应的那个方法的方法名。

例子：

```xml
<select id="selectById" resultType="User">
    select id, username, password, salt, email, type, status, activation_code, header_url, create_time
    from user
    where id = #{id}
</select>
```

其中id为mapper下的selectById方法，mapper文件如下：

```java
//根据id查询用户
User selectById(int id);
```

resultType为返回类型，本来应该写"com.goodbook.community.entity.User"，但是因为之前在application.properties文件中配置了 `mybatis.type-aliases-package=com.goodbook.community.entity`，因此这里可以省略前面的一长串。

xml的select标签中的最后一句话，也就是

```xml
where id = #{id}
```

表示使用mapper文件下的selectById的id这个参数。

注意一下application.properties的相关配置（# DataSourceProperties）

```xml
spring.datasource.url=jdbc:mysql://localhost:3306/community?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC

```

其中jdbc:mysql://localhost:3306/之后的`community`应该为你自己创建的数据库的名字，不然会出错，除此之外需要设置编码方式为Unicode，即`useUnicode=true`，不然也会出错。



通过把文件的日志级别调低，来更好地对Mybatis进行调试。（配置文件为application.properties）

```ini
# 配置日志文件
# 把com.goodbook.community的日志级别调成debug
logging.level.com.goodbook.community=debug
```



